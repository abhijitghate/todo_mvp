{% extends 'base.html' %}

{% block content %}

<label class="input">
  <svg class="h-[1em] opacity-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <g stroke-linejoin="round" stroke-linecap="round" stroke-width="2.5" fill="none" stroke="currentColor">
      <circle cx="11" cy="11" r="8"></circle>
      <path d="m21 21-4.3-4.3"></path>
    </g>
  </svg>
  <input type="search" required placeholder="Search" name="search" hx-get="{% url 'search' %}"
    hx-trigger="keyup delay:500ms" hx-target="#task_list" hx-indicator="#spinner"
    hx-on::before-request="document.getElementById('task_list').style.opacity = 0.4;"
    hx-on::after-request="document.getElementById('task_list').style.opacity = 1.0;" />
  {% include 'fragments/spinner.html' %}
</label>
<form method="POST" hx-post="{% url 'create-task' %}" hx-target="#task_list" hx-on:success="this.reset();"
  hx-swap="innerHTML" class="my-4">
  {% csrf_token %}
  {{ form.title }}
  <button type="submit" class="btn btn-success mt-2">Add Task</button>
  <button type="reset" class="btn btn-warning mt-2">Clear</button>
</form>


{% include 'fragments/task_list.html' %}


{% endblock %}